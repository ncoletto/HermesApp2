<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Hermes Inteligente App</title>
	<link rel="stylesheet" href="themes/hermes.min.css" />
	<link rel="stylesheet" href="themes/jquery.mobile.icons.min.css" />
	<link rel="stylesheet" href="js/jquery.mobile.structure-1.4.5.min.css" />
	<link rel="stylesheet" href="themes/style.css" />
	
	
	
<script src="js/jquery-1.11.3.min.js"></script>
<script src="js/jquery.mobile-1.4.5.min.js"></script>    
    
    <!--script type="text/javascript" charset="utf-8" src="cordova.js"></script-->
    <script type="text/javascript" charset="utf-8">

    // Wait for device API libraries to load
    //
	
    document.addEventListener("deviceready", arrancar, false);

    // device APIs are available
    //

		function onSuccess(acceleration) {
			
			document.getElementById("incidente").innerHTML = acceleration.y;
			
			if(acceleration.y > 10) {
				
				alert('Incidente detectado, enviando alerta sms a '+datosUsuario)
			
		}
		}
		
		function onError() {
			alert('onError!');
		};
		
		function arrancar() {
		
		var options = { frequency: 1000 };  // Update every 3 seconds
		
		var watchID = navigator.accelerometer.watchAcceleration(onSuccess, onError, options);

		}

    </script>
  

    
    
    
</head>
<body>

<!-- primera pagina INICIO -->
	<div data-role="page" id="inicio">
	    
            <div id="fondo-login">

            <!--- HEADER !-->
            <div data-role="header" class="none">
            <img id="logoimg" src="img/logo.png">
            </div>


            <!--- CONTENIDO !-->
            <div data-role="content">	
            <form id="formulario" >
            <input type="text" id="nombredeusuario" name="nombredeusuario">
            <input type="password" id="clave" name="clave">
            <input type="submit" value="Login">
            </form>	
            </div>
            </div>
        
	</div>
	</div>
<!-- /FIN Seccion -->

	
<!-- segunda pagina TIEMPO -->
<div data-role="page" id="tiempo" data-url="tiempo">
    <div data-role="header" data-theme="a">
        <h1 id="titulo">TIEMPO</h1>
        <a href="#left-panel" data-icon="carat-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open left panel</a>
        <a href="#right-panel" data-icon="carat-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open right panel</a>
    </div><!-- /header -->
    <div role="main" class="ui-content">

            <div data-role="content" class="none">
            	
           		<img id="tiempoimg" src="img/tiempo.jpg">
            </div>


     </div><!-- /content -->

 
	<!-- /panel -->
     <div data-role="panel" id="left-panel" data-display="push" data-position="left" data-theme="a">
        <p>Menú</p>

            <ul data-role="listview">
                <li><a href="#tiempo">Tiempo</a></li>
                <li><a href="#mapa">Mapa</a></li>
                <li><a href="#bluetooth">Bluetooth</a></li>
                <li><a href="#inicio">Salir</a></li>
            </ul>
  

    </div><!-- /panel -->


    <div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="a">
        <p id="configuracion">CONFIGURACIÓN </p>
            <form>
                <label for="flip-1">Música</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Llamadas</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Alerta Automática</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            
            <div class="ui-field-contain">
                <label for="textinput-fc"></label>
                <input type="text" name="textinput-fc" id="textinput-fc" placeholder="Nro. de teléfono S.O.S." value="">
            </div>

    </div><!-- /panel -->

	<!-- /footer -->

	  <div data-role="footer" data-position="fixed">
		<p id="incidente"></p>
	  </div>


	</div>
<!-- /FIN Seccion -->
	
	
	
	<!-- tercera pagina MAPA -->
<div data-role="page" id="mapa" data-url="mapa">
    <div data-role="header" data-theme="a">
        <h1>MAPA</h1>
        <a href="#left-panel" data-icon="carat-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open left panel</a>
        <a href="#right-panel" data-icon="carat-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open right panel</a>
    </div><!-- /header -->
    <div role="main" class="ui-content">

            <div data-role="content" class="none">
            	
           		<img id="tiempoimg" src="img/mapa.jpg">
            </div>


     </div><!-- /content -->

 
	<!-- /panel -->
     <div data-role="panel" id="left-panel" data-theme="a">
        <p>Menú</p>

            <ul data-role="listview">
                <li><a href="#tiempo">Tiempo</a></li>
                <li><a href="#mapa">Mapa</a></li>
                <li><a href="#bluetooth">Bluetooth</a></li>
                <li><a href="#inicio">Salir</a></li>
            </ul>
  

    </div><!-- /panel -->


    <div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="a">
        <p id="configuracion">CONFIGURACIÓN </p>
            <form>
                <label for="flip-1">Música</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Llamadas</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Alerta Automática</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            
            <div class="ui-field-contain">
                <label for="textinput-fc"></label>
                <input type="text" name="textinput-fc" id="textinput-fc" placeholder="Nro. de teléfono S.O.S." value="">
            </div>

    </div><!-- /panel -->

	<!-- /footer -->

	  <div data-role="footer" data-position="fixed">
		<p id="incidente"></p>
	  </div>


	</div>
<!-- /FIN Seccion -->

	
		<!-- cuarta pagina MAPA -->
<div data-role="page" id="bluetooth" data-url="bluetooth">
    <div data-role="header" data-theme="a">
        <h1>BLUETOOTH</h1>
        <a href="#left-panel" data-icon="carat-r" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open left panel</a>
        <a href="#right-panel" data-icon="carat-l" data-iconpos="notext" data-shadow="false" data-iconshadow="false" class="ui-nodisc-icon">Open right panel</a>
    </div><!-- /header -->
    <div role="main" class="ui-content">

            <div data-role="content" class="none">
            	
           		<img id="tiempoimg" src="img/bluetooth.jpg">
            </div>


     </div><!-- /content -->

 
	<!-- /panel -->
     <div data-role="panel" id="left-panel" data-theme="a">
        <p>Menú</p>

            <ul data-role="listview">
                <li><a href="#tiempo">Tiempo</a></li>
                <li><a href="#mapa">Mapa</a></li>
                <li><a href="#bluetooth">Bluetooth</a></li>
                <li><a href="#inicio">Salir</a></li>
            </ul>
  

    </div><!-- /panel -->


    <div data-role="panel" id="right-panel" data-display="push" data-position="right" data-theme="a">
        <p id="configuracion">CONFIGURACIÓN </p>
            <form>
                <label for="flip-1">Música</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Llamadas</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            <form>
                <label for="flip-1">Alerta Automática</label>
                <select id="flip-1" name="flip-1" data-role="slider">
                    <option value="off">NO</option>
                    <option value="on">SI</option>
                </select>
            </form>
            
            <div class="ui-field-contain">
                <label for="textinput-fc"></label>
                <input type="text" name="textinput-fc" id="textinput-fc" placeholder="Nro. de teléfono S.O.S." value="">
            </div>

    </div><!-- /panel -->

	<!-- /footer -->

	  <div data-role="footer" data-position="fixed">
        <p id="incidente"></p>
	  </div>


	</div>
<!-- /FIN Seccion -->

	
	
<script>

    
	$('#formulario').submit(function() {
	// recolecta los valores que inserto el usuario
	var datosUsuario = $("#nombredeusuario").val()
	var datosPassword = $("#clave").val()
	

	archivoValidacion = "http://localhost/hermestheme2/validacionReal.php?jsoncallback=?" 
	 
	$.getJSON( archivoValidacion, { usuario:datosUsuario ,password:datosPassword}) 
	.done(function(respuestaServer) {


		if(respuestaServer.validacion == "ok"){ 

			
		
			$.mobile.changePage("#tiempo"); // Redirige a esa page automaticamente va una vez

			$("#tiempo").on("pageshow", function(){ //al mostrarse esa pagina pasa algo.

				//muestro un ID de algo con el dato que traje de la base
				//$("#titulo").append("Bienvenido, "+ datosUsuario);
				$("#configuracion").empty();
				
				$("#configuracion").append("CONFIGURACIÓN "+ datosUsuario);
                var elementos = Object.keys(respuestaServer).length;

			});

            
            
	}else{

	    alert("Datos inválidos");
	}
	

	})


	return false;


	})


</script>
	
	
</body>
</html>